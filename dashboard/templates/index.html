<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Scanner Dashboard</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/dark-mode.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">ðŸŽ° Casino Scanner</div>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div class="nav-links">
                <a href="#" onclick="showView('dashboard')" class="nav-link active">Dashboard</a>
                <a href="#" onclick="showView('scans')" class="nav-link">Scans</a>
                <a href="#" onclick="showView('vulnerabilities')" class="nav-link">Vulnerabilities</a>
                <a href="#" onclick="showView('targets')" class="nav-link">Targets</a>
                <a href="#" onclick="showView('plugins')" class="nav-link">Plugins</a>
                <a href="#" onclick="showView('terminal')" class="nav-link">Terminal</a>
            </div>
            <button class="theme-toggle" onclick="toggleDarkMode()" title="Toggle dark mode">
                <span id="theme-icon">ðŸŒ™</span>
            </button>
        </div>
    </nav>

    <div class="container">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <h1>Dashboard</h1>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Scans</div>
                    <div class="stat-value" id="stat-total-scans">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Running Scans</div>
                    <div class="stat-value" id="stat-running-scans">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Vulnerabilities</div>
                    <div class="stat-value" id="stat-vulnerabilities">0</div>
                </div>
                <div class="stat-card critical">
                    <div class="stat-label">Critical</div>
                    <div class="stat-value" id="stat-critical">0</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Scan Status</h3>
                    <canvas id="scan-status-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Vulnerability Severity</h3>
                    <canvas id="vuln-severity-chart"></canvas>
                </div>
            </div>

            <div class="recent-scans">
                <h3>Recent Scans</h3>
                <div id="recent-scans-list"></div>
            </div>
        </div>

        <!-- Scans View -->
        <div id="scans-view" class="view">
            <h1>Scans</h1>
            <div class="action-bar">
                <button onclick="showNewScanModal()" class="btn btn-primary">New Scan</button>
                <input type="text" id="search-scans" placeholder="Search scans..." onkeyup="filterScans()" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; flex: 1; max-width: 300px;">
                <label for="filter-status" class="visually-hidden">Filter by scan status</label>
                <select id="filter-status" onchange="loadScans()" title="Filter by scan status">
                    <option value="">All Status</option>
                    <option value="pending">Pending</option>
                    <option value="running">Running</option>
                    <option value="completed">Completed</option>
                    <option value="failed">Failed</option>
                </select>
            </div>
            <div id="scans-list"></div>
        </div>

        <!-- Vulnerabilities View -->
        <div id="vulnerabilities-view" class="view">
            <h1>Vulnerabilities</h1>
            <div class="action-bar">
                <input type="text" id="search-vulns" placeholder="Search vulnerabilities..." onkeyup="filterVulnerabilities()" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; flex: 1; max-width: 300px;">
                <select id="filter-severity" onchange="loadVulnerabilities()">
                    <option value="">All Severities</option>
                    <option value="critical">Critical</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</option>
                    <option value="low">Low</option>
                </select>
            </div>
            <div id="vulnerabilities-list"></div>
        </div>

        <!-- Targets View -->
        <div id="targets-view" class="view">
            <h1>Targets
                <span class="help-badge tooltip" title="Manage your scan targets. Add URLs to track and scan them easily.">?</span>
            </h1>
            <div class="action-bar">
                <button onclick="showNewTargetModal()" class="btn btn-primary">âž• Add Target</button>
                <input type="text" id="search-targets" placeholder="Search targets..." onkeyup="filterTargets()" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; flex: 1; max-width: 300px;">
                <select id="filter-target-status" onchange="loadTargets()">
                    <option value="">All Status</option>
                    <option value="pending">Pending</option>
                    <option value="active">Active</option>
                    <option value="completed">Completed</option>
                    <option value="archived">Archived</option>
                </select>
            </div>
            <div id="targets-list"></div>
        </div>

        <!-- Plugins View -->
        <div id="plugins-view" class="view">
            <h1>Plugins</h1>
            <div id="plugins-list"></div>
        </div>

        <!-- Terminal View -->
        <div id="terminal-view" class="view">
            <h1>Terminal <span style="font-size: 0.8rem; color: #666; font-weight: normal;">(Ctrl+U for command palette)</span></h1>
            <div class="terminal-container">
                <div id="terminal-output" class="terminal-output"></div>
                <div class="terminal-input-container">
                    <span class="terminal-prompt">casino@scanner:~$</span>
                    <input type="text" id="terminal-input" class="terminal-input" autocomplete="off" spellcheck="false" placeholder="Type command or press Ctrl+U for command palette...">
                </div>
            </div>
        </div>
    </div>

    <!-- Command Palette Modal -->
    <div id="command-palette" class="modal">
        <div class="modal-content command-palette-content">
            <div class="command-palette-header">
                <input type="text" id="command-search" class="command-search" placeholder="Type command or search... (Ctrl+U to close)" autofocus>
            </div>
            <div id="command-list" class="command-list"></div>
        </div>
    </div>

        <!-- New Scan Modal -->
    <div id="new-scan-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('new-scan-modal')">&times;</span>
            <h2>New Scan</h2>
            <form id="new-scan-form" onsubmit="createScan(event)">
                <div class="form-group">
                    <label>Plugin:</label>
                    <select id="scan-plugin" required onchange="updateScanConfig()">
                        <option value="">Select plugin...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Scan Name:</label>
                    <input type="text" id="scan-name" required placeholder="Enter scan name">
                </div>
                <div id="scan-config">
                    <!-- Plugin-specific config will be inserted here -->
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="submit" class="btn btn-primary">Start Scan</button>
                    <button type="button" class="btn" onclick="closeModal('new-scan-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

        <!-- Scan Detail Modal -->
    <div id="scan-detail-modal" class="modal">
        <div class="modal-content large">
            <span class="close" onclick="closeModal('scan-detail-modal')">&times;</span>
            <div id="scan-detail-content"></div>
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #ddd;">
                <button onclick="closeModal('scan-detail-modal')" class="btn">Close</button>
                <button id="cancel-scan-btn" onclick="cancelScan()" class="btn btn-danger" style="display: none;">Cancel Scan</button>
            </div>
        </div>
    </div>

    <!-- New Target Modal -->
    <div id="new-target-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('new-target-modal')">&times;</span>
            <h2>Add New Target</h2>
            <form id="new-target-form" onsubmit="createTarget(event)">
                <div class="form-group">
                    <label>Target URL <span style="color: #dc3545;">*</span></label>
                    <input type="url" id="target-url" required placeholder="https://example.com">
                    <small style="color: #666; display: block; margin-top: 0.25rem;">The URL to scan</small>
                </div>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="target-name" placeholder="Optional: Friendly name">
                </div>
                <div class="form-group">
                    <label>Region</label>
                    <select id="target-region">
                        <option value="">Select region...</option>
                        <option value="VN">Vietnam</option>
                        <option value="LA">Laos</option>
                        <option value="KH">Cambodia</option>
                        <option value="TH">Thailand</option>
                        <option value="PH">Philippines</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Priority (1-10)</label>
                    <input type="number" id="target-priority" min="1" max="10" value="5">
                </div>
                <div class="form-group">
                    <label>Tags (comma-separated)</label>
                    <input type="text" id="target-tags" placeholder="casino, high-value, vip">
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="target-notes" rows="3" placeholder="Additional notes about this target..."></textarea>
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="submit" class="btn btn-primary">Add Target</button>
                    <button type="button" class="btn" onclick="closeModal('new-target-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Target Detail Modal -->
    <div id="target-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('target-detail-modal')">&times;</span>
            <div id="target-detail-content"></div>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>

